{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createGallery(images) {\n    return images.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n    <li class=\"item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\"/>\n          <div>\n            <p>Likes ${likes}</p>\n            <p>Views ${views}</p>\n            <p>Comments ${comments}</p>\n            <p>Downloads ${downloads}</p>\n          </div>\n        </a>\n      </li>`).join(\"\")\n}","import axios from \"axios\";\n\nexport async function fetchFotos(query, page) {\n    const BASEURL = \"https://pixabay.com/api/\";\n  const API_KEY = \"47091591-3a0c1be132fb67c8f1fe23cd9\";\n  const response = await axios(`${BASEURL}?key=${API_KEY}&q=${query}&page=${page}&per_page=15&image_type=photo&orientation=horizontal&safesearch=true`)\n  return response.data\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { createGallery } from \"./js/render-functions\";\nimport { fetchFotos } from \"./js/pixabay-api\";\n\nconst form = document.querySelector(\".search-form\");\nconst galleryList = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\")\nconst loadMoreBtn = document.querySelector(\".load-more-btn\")\nlet page = 1;\nlet inputValue = \"\";\n\nconst lightBox = new SimpleLightbox('.gallery a');\nform.addEventListener(\"submit\", onSearchForm);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\nfunction onSearchForm(event) {\n    event.preventDefault();\n    inputValue = form.elements.query.value.trim();\n    if (inputValue === \"\") {\n        iziToast.warning({message:\"enter something for search\"})\n        return\n    }\n\n    page = 1;\n    galleryList.innerHTML = \"\";\n    loader.classList.remove(\"hidden\");\n    fetchFotos(inputValue, page).then(data => {\n        console.log(data);\n        if (data.hits.length === 0) {\n            iziToast.warning({message:\"Sorry, there are no images matching your search query. Please try again!\"})\n            return \n        }\n        const markup = createGallery(data.hits)\n        galleryList.insertAdjacentHTML(\"beforeend\", markup)\n        lightBox.refresh();\n        if (data.totalHits > 15) {\n            loadMoreBtn.classList.remove(\"hidden\");\n        } else {\n            loadMoreBtn.classList.add(\"hidden\");\n        }\n    }).catch(error => {\n        console.log(error)\n        iziToast.error({message:\"Oops, something went wrong!\"});\n    }).finally(() => {\n        loader.classList.add(\"hidden\")\n        form.reset()\n    })\n}\n\nasync function onLoadMore() {\n    page += 1;\n    loader.classList.remove(\"hidden\");\n    try {\n        const data = await fetchFotos(inputValue, page);\n        const markup = createGallery(data.hits);\n        galleryList.insertAdjacentHTML(\"beforeend\", markup);\n        lightBox.refresh();\n        scroll();\n        if (Math.ceil(data.totalHits / 15) >page) {\n            loadMoreBtn.classList.remove(\"hidden\");\n        } else {\n            loadMoreBtn.classList.add(\"hidden\");\n            iziToast.info({message:\"We're sorry, but you've reached the end of search results.\"})\n        }\n    } catch (error) {\n        console.log(error)\n        iziToast.error({message:\"Oops, something went wrong!\"});\n    }\n    finally {\n        loader.classList.add(\"hidden\");\n    }\n}\nfunction scroll() {\n    const cardHeigth = document.querySelector(\".item\").getBoundingClientRect().height\n    window.scrollBy({\n    top: cardHeigth * 2,\n    behavior: \"smooth\",\n});\n\n}"],"names":["createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","fetchFotos","query","page","axios","form","galleryList","loader","loadMoreBtn","inputValue","lightBox","SimpleLightbox","onSearchForm","onLoadMore","event","iziToast","data","markup","error","scroll","cardHeigth"],"mappings":"owBAAO,SAASA,EAAcC,EAAQ,CAClC,OAAOA,EAAO,IAAI,CAAC,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA;AAAA,mBAE/EL,CAAa;AAAA,sBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA,uBAEzBC,CAAK;AAAA,uBACLC,CAAK;AAAA,0BACFC,CAAQ;AAAA,2BACPC,CAAS;AAAA;AAAA;AAAA,YAGxB,EAAE,KAAK,EAAE,CACrB,CCXO,eAAeC,EAAWC,EAAOC,EAAM,CAI5C,OADiB,MAAMC,EAAM,qEAA+BF,CAAK,SAASC,CAAI,sEAAsE,GACpI,IAClB,CCAA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIL,EAAO,EACPM,EAAa,GAEjB,MAAMC,EAAW,IAAIC,EAAe,YAAY,EAChDN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CJ,EAAY,iBAAiB,QAASK,CAAU,EAChD,SAASD,EAAaE,EAAO,CAGzB,GAFAA,EAAM,eAAc,EACpBL,EAAaJ,EAAK,SAAS,MAAM,MAAM,KAAI,EACvCI,IAAe,GAAI,CACnBM,EAAS,QAAQ,CAAC,QAAQ,4BAA4B,CAAC,EACvD,MACH,CAEDZ,EAAO,EACPG,EAAY,UAAY,GACxBC,EAAO,UAAU,OAAO,QAAQ,EAChCN,EAAWQ,EAAYN,CAAI,EAAE,KAAKa,GAAQ,CAEtC,GADA,QAAQ,IAAIA,CAAI,EACZA,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,QAAQ,CAAC,QAAQ,0EAA0E,CAAC,EACrG,MACH,CACD,MAAME,EAASzB,EAAcwB,EAAK,IAAI,EACtCV,EAAY,mBAAmB,YAAaW,CAAM,EAClDP,EAAS,QAAO,EACZM,EAAK,UAAY,GACjBR,EAAY,UAAU,OAAO,QAAQ,EAErCA,EAAY,UAAU,IAAI,QAAQ,CAE9C,CAAK,EAAE,MAAMU,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBH,EAAS,MAAM,CAAC,QAAQ,6BAA6B,CAAC,CAC9D,CAAK,EAAE,QAAQ,IAAM,CACbR,EAAO,UAAU,IAAI,QAAQ,EAC7BF,EAAK,MAAO,CACpB,CAAK,CACL,CAEA,eAAeQ,GAAa,CACxBV,GAAQ,EACRI,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACA,MAAMS,EAAO,MAAMf,EAAWQ,EAAYN,CAAI,EACxCc,EAASzB,EAAcwB,EAAK,IAAI,EACtCV,EAAY,mBAAmB,YAAaW,CAAM,EAClDP,EAAS,QAAO,EAChBS,IACI,KAAK,KAAKH,EAAK,UAAY,EAAE,EAAGb,EAChCK,EAAY,UAAU,OAAO,QAAQ,GAErCA,EAAY,UAAU,IAAI,QAAQ,EAClCO,EAAS,KAAK,CAAC,QAAQ,4DAA4D,CAAC,EAE3F,OAAQG,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBH,EAAS,MAAM,CAAC,QAAQ,6BAA6B,CAAC,CACzD,QACO,CACJR,EAAO,UAAU,IAAI,QAAQ,CAChC,CACL,CACA,SAASY,GAAS,CACd,MAAMC,EAAa,SAAS,cAAc,OAAO,EAAE,sBAAqB,EAAG,OAC3E,OAAO,SAAS,CAChB,IAAKA,EAAa,EAClB,SAAU,QACd,CAAC,CAED"}